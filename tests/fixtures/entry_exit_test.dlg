# Test file for trigger/exit parsing (@talk, @event, @end)

[characters]
officer: Fire Nation Officer
recruit: Fire Nation Recruit

[state]
*set talked_before = false
*set equipment_equipped = false

[start]
@talk:officer
officer: "On your feet, recruit!"
-> yes_sir: "Yes, sir!"
-> confused: "What?"

[yes_sir]
officer: "Good. Now get moving."
*set talked_before = true
-> get_equipment

[confused]
officer: "Wake up, soldier!"
*set talked_before = true
-> get_equipment

[get_equipment]
@talk:officer {talked_before && !equipment_equipped}
officer: "Your gear's in that locker."
-> equip_items: "[Equip the items]"

[equip_items]
@talk:officer {equipment_equipped}
*set equipment_equipped = true
officer: "About time. Get to the deck."
@end

[ship_deck]
officer: "We approach the Southern Air Temple!"
@end

[talk_recruit_1]
@talk:recruit
recruit: "Hey, how're you feeling about the invasion?"
*set asked_about_comet = true
@end

[talk_recruit_2]
@talk:recruit {asked_about_comet}
recruit: "Can't wait to show what I've got!"
@end

[exploration_phase]
@event:exploration_start
recruit: "Good luck out there!"
-> END
