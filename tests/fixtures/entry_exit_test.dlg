# Test file for entry/exit parsing

[characters]
officer: Fire Nation Officer
recruit: Fire Nation Recruit

[state]
*set talked_before = false
*set equipment_equipped = false

[entry:officer]
# Entry routes - first match wins
equipment_equipped -> equip_items
talked_before && !equipment_equipped -> get_equipment
-> start

# Exit markers
<- equip_items
<- ship_deck

[entry:recruit]
asked_about_comet -> talk_recruit_2
-> talk_recruit_1
<- exploration_phase

[start]
officer: "On your feet, recruit!"
-> yes_sir: "Yes, sir!"
-> confused: "What?"

[yes_sir]
officer: "Good. Now get moving."
*set talked_before = true
-> get_equipment

[confused]
officer: "Wake up, soldier!"
*set talked_before = true
-> get_equipment

[get_equipment]
officer: "Your gear's in that locker."
-> equip_items: "[Equip the items]"

[equip_items]
*set equipment_equipped = true
officer: "About time. Get to the deck."
-> ship_deck

[ship_deck]
officer: "We approach the Southern Air Temple!"
-> END

[talk_recruit_1]
recruit: "Hey, how're you feeling about the invasion?"
*set asked_about_comet = true
-> exploration_phase

[talk_recruit_2]
recruit: "Can't wait to show what I've got!"
-> exploration_phase

[exploration_phase]
recruit: "Good luck out there!"
-> END
